/*! SmartEditor3 - v1.0.0 - 2018-05-10
* Copyright (c) 2018 NAVER Corp; Licensed  */

(function(a,b){"use strict";if(typeof define==="function"&&define.amd){define(b)}else if(typeof exports==="object"){module.exports=b()}else{a.returnExports=b()}})(this,function(){var a=Array;var b=a.prototype;var c=Object;var d=c.prototype;var e=Function.prototype;var f=String;var g=f.prototype;var h=Number;var i=h.prototype;var j=b.slice;var k=b.splice;var l=b.push;var m=b.unshift;var n=b.concat;var o=e.call;var p=Math.max;var q=Math.min;var r=d.toString;var s=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var t;var u=Function.prototype.toString,v=function Ma(a){try{u.call(a);return true}catch(b){return false}},w="[object Function]",x="[object GeneratorFunction]";t=function Na(a){if(typeof a!=="function"){return false}if(s){return v(a)}var b=r.call(a);return b===w||b===x};var y;var z=RegExp.prototype.exec,A=function Oa(a){try{z.call(a);return true}catch(b){return false}},B="[object RegExp]";y=function Pa(a){if(typeof a!=="object"){return false}return s?A(a):r.call(a)===B};var C;var D=String.prototype.valueOf,E=function Qa(a){try{D.call(a);return true}catch(b){return false}},F="[object String]";C=function Ra(a){if(typeof a==="string"){return true}if(typeof a!=="object"){return false}return s?E(a):r.call(a)===F};var G=function(a){var b=c.defineProperty&&function(){try{var a={};c.defineProperty(a,"x",{enumerable:false,value:a});for(var b in a){return false}return a.x===a}catch(d){return false}}();var d;if(b){d=function(a,b,d,e){if(!e&&b in a){return}c.defineProperty(a,b,{configurable:true,enumerable:false,writable:true,value:d})}}else{d=function(a,b,c,d){if(!d&&b in a){return}a[b]=c}}return function e(b,c,f){for(var g in c){if(a.call(c,g)){d(b,g,c[g],f)}}}}(d.hasOwnProperty);var H=function Sa(a){var b=typeof a;return a===null||b!=="object"&&b!=="function"};var I=h.isNaN||function(a){return a!==a};var J={ToInteger:function Ta(a){var b=+a;if(I(b)){b=0}else if(b!==0&&b!==1/0&&b!==-(1/0)){b=(b>0||-1)*Math.floor(Math.abs(b))}return b},ToPrimitive:function Ua(a){var b,c,d;if(H(a)){return a}c=a.valueOf;if(t(c)){b=c.call(a);if(H(b)){return b}}d=a.toString;if(t(d)){b=d.call(a);if(H(b)){return b}}throw new TypeError},ToObject:function(a){if(a==null){throw new TypeError("can't convert "+a+" to object")}return c(a)},ToUint32:function Va(a){return a>>>0}};var K=function Wa(){};G(e,{bind:function Xa(a){var b=this;if(!t(b)){throw new TypeError("Function.prototype.bind called on incompatible "+b)}var d=j.call(arguments,1);var e;var f=function(){if(this instanceof e){var f=b.apply(this,n.call(d,j.call(arguments)));if(c(f)===f){return f}return this}else{return b.apply(a,n.call(d,j.call(arguments)))}};var g=p(0,b.length-d.length);var h=[];for(var i=0;i<g;i++){l.call(h,"$"+i)}e=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this, arguments); }")(f);if(b.prototype){K.prototype=b.prototype;e.prototype=new K;K.prototype=null}return e}});var L=o.bind(d.hasOwnProperty);var M=o.bind(d.toString);var N=o.bind(g.slice);var O=o.bind(g.split);var P=a.isArray||function Ya(a){return M(a)==="[object Array]"};var Q=[].unshift(0)!==1;G(b,{unshift:function(){m.apply(this,arguments);return this.length}},Q);G(a,{isArray:P});var R=c("a");var S=R[0]!=="a"||!(0 in R);var T=function Za(a){var b=true;var c=true;if(a){a.call("foo",function(a,c,d){if(typeof d!=="object"){b=false}});a.call([1],function(){"use strict";c=typeof this==="string"},"x")}return!!a&&b&&c};G(b,{forEach:function $a(a){var b=J.ToObject(this);var c=S&&C(this)?O(this,""):b;var d=-1;var e=J.ToUint32(c.length);var f;if(arguments.length>1){f=arguments[1]}if(!t(a)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++d<e){if(d in c){if(typeof f==="undefined"){a(c[d],d,b)}else{a.call(f,c[d],d,b)}}}}},!T(b.forEach));G(b,{map:function _a(b){var c=J.ToObject(this);var d=S&&C(this)?O(this,""):c;var e=J.ToUint32(d.length);var f=a(e);var g;if(arguments.length>1){g=arguments[1]}if(!t(b)){throw new TypeError("Array.prototype.map callback must be a function")}for(var h=0;h<e;h++){if(h in d){if(typeof g==="undefined"){f[h]=b(d[h],h,c)}else{f[h]=b.call(g,d[h],h,c)}}}return f}},!T(b.map));G(b,{filter:function ab(a){var b=J.ToObject(this);var c=S&&C(this)?O(this,""):b;var d=J.ToUint32(c.length);var e=[];var f;var g;if(arguments.length>1){g=arguments[1]}if(!t(a)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var h=0;h<d;h++){if(h in c){f=c[h];if(typeof g==="undefined"?a(f,h,b):a.call(g,f,h,b)){l.call(e,f)}}}return e}},!T(b.filter));G(b,{every:function bb(a){var b=J.ToObject(this);var c=S&&C(this)?O(this,""):b;var d=J.ToUint32(c.length);var e;if(arguments.length>1){e=arguments[1]}if(!t(a)){throw new TypeError("Array.prototype.every callback must be a function")}for(var f=0;f<d;f++){if(f in c&&!(typeof e==="undefined"?a(c[f],f,b):a.call(e,c[f],f,b))){return false}}return true}},!T(b.every));G(b,{some:function cb(a){var b=J.ToObject(this);var c=S&&C(this)?O(this,""):b;var d=J.ToUint32(c.length);var e;if(arguments.length>1){e=arguments[1]}if(!t(a)){throw new TypeError("Array.prototype.some callback must be a function")}for(var f=0;f<d;f++){if(f in c&&(typeof e==="undefined"?a(c[f],f,b):a.call(e,c[f],f,b))){return true}}return false}},!T(b.some));var U=false;if(b.reduce){U=typeof b.reduce.call("es5",function(a,b,c,d){return d})==="object"}G(b,{reduce:function db(a){var b=J.ToObject(this);var c=S&&C(this)?O(this,""):b;var d=J.ToUint32(c.length);if(!t(a)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(d===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var e=0;var f;if(arguments.length>=2){f=arguments[1]}else{do{if(e in c){f=c[e++];break}if(++e>=d){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;e<d;e++){if(e in c){f=a(f,c[e],e,b)}}return f}},!U);var V=false;if(b.reduceRight){V=typeof b.reduceRight.call("es5",function(a,b,c,d){return d})==="object"}G(b,{reduceRight:function eb(a){var b=J.ToObject(this);var c=S&&C(this)?O(this,""):b;var d=J.ToUint32(c.length);if(!t(a)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(d===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var e;var f=d-1;if(arguments.length>=2){e=arguments[1]}else{do{if(f in c){e=c[f--];break}if(--f<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(f<0){return e}do{if(f in c){e=a(e,c[f],f,b)}}while(f--);return e}},!V);var W=b.indexOf&&[0,1].indexOf(1,2)!==-1;G(b,{indexOf:function fb(a){var b=S&&C(this)?O(this,""):J.ToObject(this);var c=J.ToUint32(b.length);if(c===0){return-1}var d=0;if(arguments.length>1){d=J.ToInteger(arguments[1])}d=d>=0?d:p(0,c+d);for(;d<c;d++){if(d in b&&b[d]===a){return d}}return-1}},W);var X=b.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;G(b,{lastIndexOf:function gb(a){var b=S&&C(this)?O(this,""):J.ToObject(this);var c=J.ToUint32(b.length);if(c===0){return-1}var d=c-1;if(arguments.length>1){d=q(d,J.ToInteger(arguments[1]))}d=d>=0?d:c-Math.abs(d);for(;d>=0;d--){if(d in b&&a===b[d]){return d}}return-1}},X);var Y=function(){var a=[1,2];var b=a.splice();return a.length===2&&P(b)&&b.length===0}();G(b,{splice:function hb(a,b){if(arguments.length===0){return[]}else{return k.apply(this,arguments)}}},!Y);var Z=function(){var a={};b.splice.call(a,0,0,1);return a.length===1}();G(b,{splice:function ib(a,b){if(arguments.length===0){return[]}var c=arguments;this.length=p(J.ToInteger(this.length),0);if(arguments.length>0&&typeof b!=="number"){c=j.call(arguments);if(c.length<2){l.call(c,this.length-a)}else{c[1]=J.ToInteger(b)}}return k.apply(this,c)}},!Z);var $=function(){var b=new a(1e5);b[8]="x";b.splice(1,1);return b.indexOf("x")===7}();var _=function(){var a=256;var b=[];b[a]="a";b.splice(a+1,0,"b");return b[a]==="a"}();G(b,{splice:function jb(a,b){var c=J.ToObject(this);var d=[];var e=J.ToUint32(c.length);var g=J.ToInteger(a);var h=g<0?p(e+g,0):q(g,e);var i=q(p(J.ToInteger(b),0),e-h);var k=0;var l;while(k<i){l=f(h+k);if(L(c,l)){d[k]=c[l]}k+=1}var m=j.call(arguments,2);var n=m.length;var o;if(n<i){k=h;while(k<e-i){l=f(k+i);o=f(k+n);if(L(c,l)){c[o]=c[l]}else{delete c[o]}k+=1}k=e;while(k>e-i+n){delete c[k-1];k-=1}}else if(n>i){k=e-i;while(k>h){l=f(k+i-1);o=f(k+n-1);if(L(c,l)){c[o]=c[l]}else{delete c[o]}k-=1}}k=h;for(var r=0;r<m.length;++r){c[k]=m[r];k+=1}c.length=e-i+n;return d}},!$||!_);var aa=!{toString:null}.propertyIsEnumerable("toString");var ba=function(){}.propertyIsEnumerable("prototype");var ca=!L("x","0");var da=function(a){var b=a.constructor;return b&&b.prototype===a};var ea={$window:true,$console:true,$parent:true,$self:true,$frame:true,$frames:true,$frameElement:true,$webkitIndexedDB:true,$webkitStorageInfo:true};var fa=function(){if(typeof window==="undefined"){return false}for(var a in window){try{if(!ea["$"+a]&&L(window,a)&&window[a]!==null&&typeof window[a]==="object"){da(window[a])}}catch(b){return true}}return false}();var ga=function(a){if(typeof window==="undefined"||!fa){return da(a)}try{return da(a)}catch(b){return false}};var ha=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var ia=ha.length;var ja=function kb(a){return M(a)==="[object Arguments]"};var ka=function lb(a){return a!==null&&typeof a==="object"&&typeof a.length==="number"&&a.length>=0&&!P(a)&&t(a.callee)};var la=ja(arguments)?ja:ka;G(c,{keys:function mb(a){var b=t(a);var c=la(a);var d=a!==null&&typeof a==="object";var e=d&&C(a);if(!d&&!b&&!c){throw new TypeError("Object.keys called on a non-object")}var g=[];var h=ba&&b;if(e&&ca||c){for(var i=0;i<a.length;++i){l.call(g,f(i))}}if(!c){for(var j in a){if(!(h&&j==="prototype")&&L(a,j)){l.call(g,f(j))}}}if(aa){var k=ga(a);for(var m=0;m<ia;m++){var n=ha[m];if(!(k&&n==="constructor")&&L(a,n)){l.call(g,n)}}}return g}});var ma=c.keys&&function(){return c.keys(arguments).length===2}(1,2);var na=c.keys&&function(){var a=c.keys(arguments);return arguments.length!==1||a.length!==1||a[0]!==1}(1);var oa=c.keys;G(c,{keys:function nb(a){if(la(a)){return oa(j.call(a))}else{return oa(a)}}},!ma||na);var pa=-621987552e5;var qa="-000001";var ra=Date.prototype.toISOString&&new Date(pa).toISOString().indexOf(qa)===-1;var sa=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";G(Date.prototype,{toISOString:function ob(){var a,b,c,d,e;if(!isFinite(this)){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}d=this.getUTCFullYear();e=this.getUTCMonth();d+=Math.floor(e/12);e=(e%12+12)%12;a=[e+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];d=(d<0?"-":d>9999?"+":"")+N("00000"+Math.abs(d),0<=d&&d<=9999?-4:-6);b=a.length;while(b--){c=a[b];if(c<10){a[b]="0"+c}}return d+"-"+j.call(a,0,2).join("-")+"T"+j.call(a,2).join(":")+"."+N("000"+this.getUTCMilliseconds(),-3)+"Z"}},ra||sa);var ta=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(pa).toJSON().indexOf(qa)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(a){return false}}();if(!ta){Date.prototype.toJSON=function pb(a){var b=c(this);var d=J.ToPrimitive(b);if(typeof d==="number"&&!isFinite(d)){return null}var e=b.toISOString;if(!t(e)){throw new TypeError("toISOString property is not callable")}return e.call(b)}}var ua=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var va=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var wa=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(wa||va||!ua){var xa=Math.pow(2,31)-1;var ya=Math.floor(xa/1e3);var za=I(new Date(1970,0,1,0,0,0,xa+1).getTime());Date=function(a){var b=function k(c,d,e,g,h,i,j){var k=arguments.length;var l;if(this instanceof a){var m=i;var n=j;if(za&&k>=7&&j>xa){var o=Math.floor(j/xa)*xa;var p=Math.floor(o/1e3);m+=p;n-=p*1e3}l=k===1&&f(c)===c?new a(b.parse(c)):k>=7?new a(c,d,e,g,h,m,n):k>=6?new a(c,d,e,g,h,m):k>=5?new a(c,d,e,g,h):k>=4?new a(c,d,e,g):k>=3?new a(c,d,e):k>=2?new a(c,d):k>=1?new a(c):new a}else{l=a.apply(this,arguments)}if(!H(l)){G(l,{constructor:b},true)}return l};var c=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var d=[0,31,59,90,120,151,181,212,243,273,304,334,365];var e=function l(a,b){var c=b>1?1:0;return d[b]+Math.floor((a-1969+c)/4)-Math.floor((a-1901+c)/100)+Math.floor((a-1601+c)/400)+365*(a-1970)};var g=function m(b){var c=0;var d=b;if(za&&d>xa){var e=Math.floor(d/xa)*xa;var f=Math.floor(e/1e3);c+=f;d-=f*1e3}return h(new a(1970,0,1,0,0,c,d))};for(var i in a){if(L(a,i)){b[i]=a[i]}}G(b,{now:a.now,UTC:a.UTC},true);b.prototype=a.prototype;G(b.prototype,{constructor:b},true);var j=function n(b){var d=c.exec(b);if(d){var f=h(d[1]),i=h(d[2]||1)-1,j=h(d[3]||1)-1,k=h(d[4]||0),l=h(d[5]||0),m=h(d[6]||0),n=Math.floor(h(d[7]||0)*1e3),o=Boolean(d[4]&&!d[8]),p=d[9]==="-"?1:-1,q=h(d[10]||0),r=h(d[11]||0),s;var t=l>0||m>0||n>0;if(k<(t?24:25)&&l<60&&m<60&&n<1e3&&i>-1&&i<12&&q<24&&r<60&&j>-1&&j<e(f,i+1)-e(f,i)){s=((e(f,i)+j)*24+k+q*p)*60;s=((s+l+r*p)*60+m)*1e3+n;if(o){s=g(s)}if(-864e13<=s&&s<=864e13){return s}}return NaN}return a.parse.apply(this,arguments)};G(b,{parse:j});return b}(Date)}if(!Date.now){Date.now=function qb(){return(new Date).getTime()}}var Aa=i.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128");var Ba={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function rb(a,b){var c=-1;var d=b;while(++c<Ba.size){d+=a*Ba.data[c];Ba.data[c]=d%Ba.base;d=Math.floor(d/Ba.base)}},divide:function sb(a){var b=Ba.size,c=0;while(--b>=0){c+=Ba.data[b];Ba.data[b]=Math.floor(c/a);c=c%a*Ba.base}},numToString:function tb(){var a=Ba.size;var b="";while(--a>=0){if(b!==""||a===0||Ba.data[a]!==0){var c=f(Ba.data[a]);if(b===""){b=c}else{b+=N("0000000",0,7-c.length)+c}}}return b},pow:function ub(a,b,c){return b===0?c:b%2===1?ub(a,b-1,c*a):ub(a*a,b/2,c)},log:function vb(a){var b=0;var c=a;while(c>=4096){b+=12;c/=4096}while(c>=2){b+=1;c/=2}return b}};G(i,{toFixed:function wb(a){var b,c,d,e,g,i,j,k;b=h(a);b=I(b)?0:Math.floor(b);if(b<0||b>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}c=h(this);if(I(c)){return"NaN"}if(c<=-1e21||c>=1e21){return f(c)}d="";if(c<0){d="-";c=-c}e="0";if(c>1e-21){g=Ba.log(c*Ba.pow(2,69,1))-69;i=g<0?c*Ba.pow(2,-g,1):c/Ba.pow(2,g,1);i*=4503599627370496;g=52-g;if(g>0){Ba.multiply(0,i);j=b;while(j>=7){Ba.multiply(1e7,0);j-=7}Ba.multiply(Ba.pow(10,j,1),0);j=g-1;while(j>=23){Ba.divide(1<<23);j-=23}Ba.divide(1<<j);Ba.multiply(1,1);Ba.divide(2);e=Ba.numToString()}else{Ba.multiply(0,i);Ba.multiply(1<<-g,0);e=Ba.numToString()+N("0.00000000000000000000",2,2+b)}}if(b>0){k=e.length;if(k<=b){e=d+N("0.0000000000000000000",0,b-k+2)+e}else{e=d+N(e,0,k-b)+"."+N(e,k-b)}}else{e=d+e}return e}},Aa);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var a=typeof/()??/.exec("")[1]==="undefined";var b=Math.pow(2,32)-1;g.split=function(c,d){var e=this;if(typeof c==="undefined"&&d===0){return[]}if(!y(c)){return O(this,c,d)}var f=[];var g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(c.sticky?"y":""),h=0,i,k,m,n;var o=new RegExp(c.source,g+"g");e+="";if(!a){i=new RegExp("^"+o.source+"$(?!\\s)",g)}var p=typeof d==="undefined"?b:J.ToUint32(d);k=o.exec(e);while(k){m=k.index+k[0].length;if(m>h){l.call(f,N(e,h,k.index));if(!a&&k.length>1){k[0].replace(i,function(){for(var a=1;a<arguments.length-2;a++){if(typeof arguments[a]==="undefined"){k[a]=void 0}}})}if(k.length>1&&k.index<e.length){l.apply(f,j.call(k,1))}n=k[0].length;h=m;if(f.length>=p){break}}if(o.lastIndex===k.index){o.lastIndex++}k=o.exec(e)}if(h===e.length){if(n||!o.test("")){l.call(f,"")}}else{l.call(f,N(e,h))}return f.length>p?arraySlice(f,0,p):f}})()}else if("0".split(void 0,0).length){g.split=function xb(a,b){if(typeof a==="undefined"&&b===0){return[]}return O(this,a,b)}}var Ca=g.replace;var Da=function(){var a=[];"x".replace(/x(.)?/g,function(b,c){l.call(a,c)});return a.length===1&&typeof a[0]==="undefined"}();if(!Da){g.replace=function yb(a,b){var c=t(b);var d=y(a)&&/\)[*?]/.test(a.source);if(!c||!d){return Ca.call(this,a,b)}else{var e=function(c){var d=arguments.length;var e=a.lastIndex;a.lastIndex=0;var f=a.exec(c)||[];a.lastIndex=e;l.call(f,arguments[d-2],arguments[d-1]);return b.apply(this,f)};return Ca.call(this,a,e)}}}var Ea=g.substr;var Fa="".substr&&"0b".substr(-1)!=="b";G(g,{substr:function zb(a,b){var c=a;if(a<0){c=p(this.length+a,0)}return Ea.call(this,c,b)}},Fa);var Ga="	\n\f\r   ᠎    "+"         　\u2028"+"\u2029\ufeff";var Ha="​";var Ia="["+Ga+"]";var Ja=new RegExp("^"+Ia+Ia+"*");var Ka=new RegExp(Ia+Ia+"*$");var La=g.trim&&(Ga.trim()||!Ha.trim());G(g,{trim:function Ab(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return f(this).replace(Ja,"").replace(Ka,"")}},La);if(parseInt(Ga+"08")!==8||parseInt(Ga+"0x16")!==22){parseInt=function(a){var b=/^0[xX]/;return function c(d,e){var g=f(d).trim();var i=h(e)||(b.test(g)?16:10);return a(g,i)}}(parseInt)}});if(!window.console){window.console={};console.log=function(){};console.warn=function(){};console.error=function(){}}if(typeof Object.getPrototypeOf!=="function"){if(typeof"test".__proto__==="object"){Object.getPrototypeOf=function(a){return a.__proto__}}else{Object.getPrototypeOf=function(a){return a.constructor.prototype}}}if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e}}if(!Array.prototype.forEach){Array.prototype.forEach=function(a,b){var c,d;if(this===null){throw new TypeError(" this is null or not defined")}var e=Object(this);var f=e.length>>>0;if(typeof a!=="function"){throw new TypeError(a+" is not a function")}if(arguments.length>1){c=b}d=0;while(d<f){var g;if(d in e){g=e[d];a.call(c,g,d,e)}d++}}}if(!Array.isArray){Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}}(function(a){var b=/^\$(LOCAL|BEFORE|ON|AFTER)_/,c=/^\$(BEFORE|ON|AFTER)_MSG_APP_READY$/,d=[];function e(a){if(!a||typeof a!=="object"&&typeof a!=="function"){throw"An error occured in _getPluginMixin: invalid plug-in"}if(a._bPLUGIN_CLASS){return a}if(typeof a==="function"){f.call(a.prototype)}else if(typeof a==="object"){f.call(Object.getPrototypeOf(a))}return a}function f(){this._bPLUGIN_CLASS=true;this._nPLUGIN_INDEX=0;this._sPLUGIN_NAME="";this.oApp=null;this._nPLUGIN_STATUS=-1;this.setPluginIndex=function(a){this._nPLUGIN_INDEX=a};this.getPluginIndex=function(){return this._nPLUGIN_INDEX};this.setAppInstance=function(a){this.oApp=a};this.setPluginStatus=function(a){this._nPLUGIN_STATUS=a};this.getPluginStatus=function(){return this._nPLUGIN_STATUS};this.setPluginName=function(a){this._sPLUGIN_NAME=a};this.getPluginName=function(){return this._sPLUGIN_NAME}}function g(a){var b=function(a){this.htOptions=a||{};this._initVar();d.push(this);if(this.htOptions.oDebugger){this._bDebug=true;jHusky.getCore=function(){return d};this.htOptions.oDebugger.setApp(this)}this.registerPlugin("HuskyCore",this)};b=e(b);h.call(b.prototype);b.prototype.constructor=b;return new b(a)}function h(){this._initVar=function(){this.messageQueue=[];this.oMessageMap={};this.oDisabledMessage={};this.oLazyMessage={};this.aPlugins=[];this.appStatus=a.jHusky.APP_STATUS.NOT_READY;this._bDebug=false;this._fnWaitForPluginReady=this._waitForPluginReady.bind(this)};this.run=function(b){this.htRunOptions=b||{};this._changeAppStatus(a.jHusky.APP_STATUS.WAITING_FOR_PLUGINS_READY);this.messageQueue.forEach(function(a){this.exec(a.msg,a.args,a.delay,a.event)},this);this._fnWaitForPluginReady();this.messageQueue=null};this.toggleMessage=function(a,b){if(b){this.oDisabledMessage[a]=true}else{delete this.oDisabledMessage[a]}};this.registerPlugin=function(){var c=null,d=null,f=this.aPlugins.length;if(arguments.length>1){c=arguments[0];d=arguments[1]}else{c="PLUGIN_"+f;d=arguments[0]}if(!d||typeof d!=="object"){throw"An error occured in registerPlugin(): invalid plug-in"}d=e(d);d.setPluginName(c);d.setPluginIndex(f);d.setAppInstance(this);this.aPlugins.push(d);if(d.getPluginStatus()!=a.jHusky.PLUGIN_STATUS.NOT_READY){d.setPluginStatus(a.jHusky.PLUGIN_STATUS.READY)}if(this.appStatus!=a.jHusky.APP_STATUS.NOT_READY){for(var g in d){if(b.test(g)){this.addToMessageMap(g,d)}}}this.exec("MSG_PLUGIN_REGISTERED",[d]);return d.nIdx};this.createMessageMap=function(a){this.oMessageMap[a]=[];this.aPlugins.forEach(function(b){this._doAddToMessageMap(a,b)},this)};this.addToMessageMap=function(a,b){if(!this.oMessageMap[a]){return}this._doAddToMessageMap(a,b)};this._doAddToMessageMap=function(a,b){if(typeof b[a]!="function"){return}var c=this.oMessageMap[a];for(var d=0;d<c.length;d++){if(c[d]==b){return}}this.oMessageMap[a].push(b)};this.exec=function(){var b,c=[],d=null,e=-1;if(arguments.length===0){throw new Error("Not Exist Arguments.")}Array.prototype.slice.apply(arguments).forEach(function(a,f){if(f===0){if(typeof a=="string"){b=a}else{throw new Error("Not Exist Message Name.")}}if(typeof a=="number"){e=a}else if(a instanceof Array){c=a}else if(typeof a=="object"){d=a}});if(this.appStatus==a.jHusky.APP_STATUS.NOT_READY){this.messageQueue[this.messageQueue.length]={msg:b,args:c,delay:e,event:d};return true}if(e>-1){setTimeout(function(){this._exec(b,c,d)}.bind(this),e)}else{this._exec(b,c,d)}};this._exec=function(a,b,c){return this._onDebugExecAdvice(function(){return this._doExec(a,b,c)}.bind(this),"Message",[a,b])};this._doExec=function(a,b,c){var d=false,e=[];if(!this.oDisabledMessage[a]){if(b&&b.length){var f=b.forEach(function(a){e.push(a)})}if(c){e.push(c)}d=this._execMsgStep("BEFORE",a,e);if(d){d=this._execMsgStep("ON",a,e)}if(d){d=this._execMsgStep("AFTER",a,e)}}return d};this._execMsgStep=function(a,b,c){return this._onDebugExecAdvice(function(){return this._execMsgHandler("$"+a+"_"+b,c)}.bind(this),"MessageStep",[a,b,c])};this._execMsgHandler=function(a,b){var d,e=true,f,g;if(!this.oMessageMap[a]){this.createMessageMap(a)}f=this.oMessageMap[a];g=f.length;if(g===0){return true}if(c.test(a)){f.forEach(function(c){if(e&&this._execHandler(c,a,b)===false){e=false}},this)}else{for(d=0;d<g;d++){if(!f[d]._husky_bRun){f[d]._husky_bRun=true;if(typeof f[d].$LOCAL_BEFORE_FIRST=="function"&&this._execHandler(f[d],"$LOCAL_BEFORE_FIRST",[a,b])===false){continue}}if(typeof f[d].$LOCAL_BEFORE_ALL=="function"){if(this._execHandler(f[d],"$LOCAL_BEFORE_ALL",[a,b])===false){continue}}if(this._execHandler(f[d],a,b)===false){e=false;break}}}return e};this._execHandler=function(a,b,c){return this._onDebugExecAdvice(function(){return a[b].apply(a,c)}.bind(this),"CallHandler",[a,b,c])};this._waitForPluginReady=function(){var b=true;this.aPlugins.forEach(function(c){if(b&&c.getPluginStatus()==a.jHusky.PLUGIN_STATUS.NOT_READY){b=false}},this);if(b){this._changeAppStatus(a.jHusky.APP_STATUS.READY)}else{setTimeout(this._fnWaitForPluginReady,100)}};this._changeAppStatus=function(b){this.appStatus=b;if(this.appStatus==a.jHusky.APP_STATUS.READY){this.exec("MSG_APP_READY")}};this._onDebugExecAdvice=function(a,b,c){if(this._bDebug){this.htOptions.oDebugger["log_"+b+"Start"].apply(this.htOptions.oDebugger,c)}var d=true;try{d=a()}catch(e){if(this._bDebug){this.htOptions.oDebugger.handleException(e)}console.log(e);throw e}if(this._bDebug){this.htOptions.oDebugger["log_"+b+"End"].apply(this.htOptions.oDebugger,c)}return d};this.$AFTER_MSG_APP_READY=function(){this.exec("EXEC_ON_READY_FUNCTION",[])};this.$ON_DISABLE_MESSAGE=function(a){this.toggleMessage(a,true)};this.$ON_ENABLE_MESSAGE=function(a){this.toggleMessage(a,false)};this.$ON_EXEC_ON_READY_FUNCTION=function(){if(typeof this.oApp.htRunOptions.fnOnAppReady=="function"){this.oApp.htRunOptions.fnOnAppReady()}}}a.jHusky={};a.jHusky.APP_STATUS={NOT_READY:0,WAITING_FOR_PLUGINS_READY:1,READY:2};a.jHusky.PLUGIN_STATUS={NOT_READY:0,READY:1};a.jHusky.getCoreInstance=g})(window);
//# sourceMappingURL=se_lib_core_2.min.js.map