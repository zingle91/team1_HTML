/*! SmartEditor3 - v1.0.0 - 2018-05-10
* Copyright (c) 2018 NAVER Corp; Licensed  */

se.defineComponent("se.AbstractPublishViewController",{construct:function(){},_IMPL_onClickPublishBtn:function(){AbstractMethodNotOverrideException("_IMPL_onClickPublishBtn")},_IMPL_onAfterPublish:function(){AbstractMethodNotOverrideException("_IMPL_onAfterPublish")},getPublishMetaData:function(){var a=this._IMPL_onGetPublishMetaData();return a},checkValidate:function(){return this._IMPL_onCheckValidate.apply(this,arguments)},_IMPL_onGetPublishMetaData:function(){AbstractMethodNotOverrideException("_IMPL_onGetPublishMetaData")},_IMPL_onCheckValidate:function(){AbstractMethodNotOverrideException("_IMPL_onCheckValidate")}});se.defineClass("se.DocumentModel",{construct:function(a){this._initVar(a)},_initVar:function(a){a=a||{};this._sDocType=a.docType||"normal";this._sTitle=a.title||"";this._sThumbnail=a.thumbnail||"";this._sAuthor=a.author||"";this._sTheme=a.theme||"default";this._nPublishDate=a.publishDate||"";this._htStyle=a.documentStyle||{};this._aComponents=a.components||[];this._aCards=a.cards||[];this._htRepresentativeLocation=a.representativeLocation||null;this._htScrapDocData=a.scrapDocData||null;this._htDocData=a},getDocType:function(){return this._sDocType},setDocType:function(a){this._sDocType=a},getTitle:function(){return this._sTitle},setTitle:function(a){this._sTitle=a},getThumbnail:function(){return this._sThumbnail},setThumbnail:function(a){this._sThumbnail=a},getAuthor:function(){return this._sAuthor},setAuthor:function(a){this._sAuthor=a},getPublishDate:function(){return this._nPublishDate},setPublishDate:function(a){this._nPublishDate=a},getTheme:function(){return this._sTheme},setTheme:function(a){this._sTheme=a},getDocumentStyle:function(){return this._htStyle},setDocumentStyle:function(a){this._htStyle=a},getComponents:function(){return this._aComponents||[]},setComponents:function(a){this._aComponents=a},getCards:function(){return this._aCards||[]},setCards:function(a){this._aCards=a},_refineComponentData:function(a){var b;var c=[];for(var d=0;d<a.length;d++){b=_.clone(a[d]);delete b.compId;delete b.focusComp;c.push(b)}return c},_refineCardData:function(a){var b;var c=[];for(var d=0;d<a.length;d++){b=_.clone(a[d]);delete b.isEmpty;delete b.displayStatus;delete b.id;for(var e in b){if(b[e]&&typeof b[e]==="object"){delete b[e].isFocused}}c.push(b)}return c},getJson:function(a){var b={docType:this._sDocType,title:this._sTitle,thumbnail:this._sThumbnail,theme:this._sTheme,author:this._sAuthor,publishDate:this._nPublishDate,documentStyle:this._htStyle,representativeLocation:this._htRepresentativeLocation,scrapDocData:this._htScrapDocData};if($SE_CONFIG.ENV_SETTING.IS_CARD_DOC){b.cards=a?this._aCards:this._refineCardData(this._aCards)}else{b.components=a?this._aComponents:this._refineComponentData(this._aComponents)}return b},updateData:function(a){if(!a){return false}this._sDocType=a.docType||this._sDocType;this._sTitle=a.title||this._sTitle;this._sThumbnail=a.thumbnail||this._sThumbnail;this._sAuthor=a.author||this._sAuthor;this._sTheme=a.theme||this._sTheme;this._nPublishDate=a.publishDate||this._nPublishDate;this._htRepresentativeLocation=a.representativeLocation||this._htRepresentativeLocation;this._htScrapDocData=a.scrapDocData||this._htScrapDocData}});se.defineClass("se.MetaDataModel",{construct:function(a){this._htData=a;this._htPropName={necessary:[],optional:[],additional:[]};this._htDefaultValue={}},getData:function(){return this._htData},getJson:function(){var a=this._getJsonData();return a},_genGetterSetter:function(a){var b=$SE_STRING.capitalize(a);Object.getPrototypeOf(this)["get"+b]=function(){return this["_"+a]};Object.getPrototypeOf(this)["set"+b]=function(b){this["_"+a]=b}},_initProperty:function(a){a=a||{};var b,c,d,e,f,g,h=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},i="_";for(b in this._htPropName){if(!this._htPropName.hasOwnProperty(b)){continue}c=this._htPropName[b];if(!h(c)){continue}f=g=c.length;for(;f--;){d=c[f];e=a[d];this[i+d]=typeof e!=="undefined"&&e!==null?e:this._htDefaultValue[d];this._genGetterSetter(d)}}},getTagInfo:function(){return this._IMP_tagInfo()}});se.defineClass("se.BaseComponentModel",{construct:function(a){a=a||{};this._compId=a.compId;this._compType=a?a["@ctype"]:"unknown";this._layout=a&&a.layout&&a.layout.trim()!==""?a.layout:"default";this._componentStyle=a&&a.componentStyle?a.componentStyle:{"@ctype":"componentStyle"};this._isFocused=a?a.isFocused||false:false;if(a&&a.storedNo){this._storedNo=a.storedNo}this._htData=a;this._genGetterSetter("compId");this._genGetterSetter("compType");this._genGetterSetter("layout");this._genGetterSetter("componentStyle");this._genGetterSetter("isFocused")},getData:function(){return this._htData},getJson:function(){var a=$.extend(true,{},this._getJsonData());a["@ctype"]=this._compType;a.layout=this._layout;a.isFocused=this._isFocused;if(this._storedNo){a.storedNo=this._storedNo}if(this._componentStyle){this._componentStyle["@ctype"]="componentStyle"}else{this._componentStyle={"@ctype":"componentStyle"}}a.componentStyle=this._componentStyle;return a},getJsonWithCompId:function(){var a=this.getJson();a.compId=this.getCompId();return a},updateWith:function(a){this.updateSizeWithAlign&&this.updateSizeWithAlign(a.originalWidth,a.originalHeight);Object.keys(a).forEach(function(b){var c=a[b];if(typeof c==="object"){c=JSON.parse(JSON.stringify(a[b]))}this["_"+b]=c}.bind(this))},isWrappingParagraph:function(){return this.getCompType()===$SE_CONFIG.COMP_TYPE.WRAPPING_PARAGRAPH},_genGetterSetter:function(a){var b=a.substr(0,1).toUpperCase()+a.substr(1,a.length);Object.getPrototypeOf(this)["get"+b]=function(){return this["_"+a]};Object.getPrototypeOf(this)["set"+b]=function(b){this["_"+a]=b}},_getModelInstance:function(a,b){if(!a||!a["@ctype"]){return null}var c=$SE_STRING.capitalize(a["@ctype"]);var d=se[c+"Model"];var e=$SE_MODEL_DATA_COORD.getDefaultCompData((b?b+"_":"")+a["@ctype"]);return new d(_.extend(e,a))}});se.defineComponent("se.SearchedMaterialModel",{construct:function(a,b){this._initProperty(a,b)},_initProperty:function(a,b){a=a||{};this._count=a.count||0;this._total=a.total||0;this._next=a.next||{};this._items=a.items||[];this._start=a.start||1;this._bKeyword=b;this._genGetterSetter("count");this._genGetterSetter("total");this._genGetterSetter("next");this._genGetterSetter("items");this._genGetterSetter("start");this._genGetterSetter("bKeyword")},getData:function(){return this._htData},_genGetterSetter:function(a){var b=a.substr(0,1).toUpperCase()+a.substr(1,a.length);Object.getPrototypeOf(this)["get"+b]=function(){return this["_"+a]};Object.getPrototypeOf(this)["set"+b]=function(b){this["_"+a]=b}},getJson:function(){return{count:this._count,total:this._total,next:this._next,items:this._items,start:this._start,bKeyword:this._bKeyword}}});$SE_HOTKEY=se.defineStatic("se.HotkeyManager",function(){var a={};var b=[];function c(b,c,d,f,g){if(!a[b])a[b]={};if(f&&typeof f=="function"){if(!a[b].fExecfunc){a[b].fExecfunc=[]}a[b].keySet=c;a[b].fExecfunc.push(f);a[b].eventName=g}e()}function d(b){for(var c in b){if(a[c]&&b[c]&&typeof b[c]=="function"){if(!a[c].fExecfunc){a[c].fExecfunc=[]}a[c].fExecfunc.push(b[c])}}}function e(){b.forEach(function(a){f(a)})}function f(b){var c=null;if(b){b.reset();for(var d in a){c=a[d];b.bind(c.keySet,g(d),c.eventName)}}}function g(a){return $.proxy(function(a,b){h(a,b)},this,[a])}function h(b,c){var d=a[b].fExecfunc;d.forEach(function(a){a.call(this,c)},this)}function i(c){b.forEach(function(b){b.unbind(a[c].keySet)})}function j(){return a}function k(a){b.push(a)}function l(){e()}function m(){var b=$SE_CONFIG.HOTKEY;for(var c in b){a[b[c].ns]={keySet:b[c].keySet,displayName:b[c].displayName,fExecfunc:[],eventName:b[c].eventName}}if(window.Mousetrap){k(window.Mousetrap)}}function n(){b.forEach(function(a){a.reset()});a={};b=[];m()}function o(){b.forEach(function(a){a.pause()})}function p(){b.forEach(function(a){a.unpause()})}m();return{runShortcut:l,setHandler:k,registData:d,regist:c,unregist:i,getKeyInfo:j,reset:n,pause:o,unpause:p,execShortcut:h}}());se.defineComponent("se.MaterialLayerCommonTap",{construct:function(){this._initVar();this._bindFunction()},_initVar:function(){this._aDetailInfo=[];this._sKeyword=null;this._bSuggested=false;this._nTotal=0;this._fTemplate=se.editor.template.control["material-list.hbs"];this._sGuideType="Book";this._htMaterial=$SE_CONFIG.SERVICE_CONFIG.MATERIAL;this._rxDateFormat=/^(?:\d{4}\.)?\d{1,2}\.\d{1,2}$/;this._rxNumberFormat=/\B(?=(\d{3})+(?!\d))/g;this._isBlog=$SE_CONFIG.ENV_SETTING.SERVICE_NAME===$SE_CONFIG.SERVICE_TYPE.BLOG},_bindFunction:function(){this._fClickSearchBtn=this._clickSearchBtn.bind(this);this._fClickMoreWrapper=this._clickMoreWrapper.bind(this);this._fKeyupText=this._keyupText.bind(this);this._fClickList=this._clickList.bind(this);this._fFocusAndBlur=this._focusAndBlur.bind(this)},activate:function(a){this._$elWrap=a;this._assignElements();this._bindEvent();this._$elSelectedTapView.addClass("is-active");this._$elText.get(0).focus();if(!this._bSuggested){this._getSuggestionList();this._bSuggested=true}},deactivate:function(){this._$elSelectedTapView.removeClass("is-active");this._abort();this._unbindEvent();this._unassignElements()},_bindEvent:function(){this._$elSearchBtn.on("click",this._fClickSearchBtn);this._$elMoreWrapper.on("click",this._fClickMoreWrapper);this._$elText.on("keydown",this._fKeyupText);this._$elText.on("focus",this._fFocusAndBlur);this._$elText.on("blur",this._fFocusAndBlur);this._$elResultList.on("click","li",this._fClickList)},_unbindEvent:function(){this._$elSearchBtn.off("click");this._$elMoreWrapper.off("click");this._$elText.off("keydown");this._$elText.off("focus");this._$elText.off("blur");this._$elResultList.off("click")},_assignElements:function(){this._$elSelectedTapView=$(".__se_subjectMatter_"+this.getType(),this._$elWrap);this._$elSearchWrapper=$(".pop_search_wrap",this._$elSelectedTapView);this._$elSearchBtn=$(".btn_search",this._$elSelectedTapView);this._$elClearBtn=$(".btn_input_clear",this._$elSelectedTapView);this._$elText=$(".search_input",this._$elSelectedTapView);this._$elResultList=$(".search_result_list",this._$elSelectedTapView);this._$elTotalCount=$(".result_count_number",this._$elSelectedTapView);this._$elCurrentCount=$(".more_count",this._$elSelectedTapView);this._$elMoreTotalCount=$(".more_count_total",this._$elSelectedTapView);this._$elMoreWrapper=$(".search_result_more",this._$elSelectedTapView);this._$elResultWrapper=$(".search_result_wrap",this._$elSelectedTapView);this._$elNoResult=$(".search_no_result_wrap",this._$elSelectedTapView)},_unassignElements:function(){this._$elWrap=null;this._$elSearchWrapper=null;this._$elSelectedTapView=null;this._$elSearchBtn=null;this._$elClearBtn=null;this._$elResultList=null;this._$elTotalCount=null;this._$elCurrentCount=null;this._$elMoreTotalCount=null;this._$elMoreWrapper=null;this._$elResultWrapper=null;this._$elNoResult=null},_clickSearchBtn:function(a){var b=this._getTextValue();a.stopPropagation();if(!b){return}this._requestKeyword(b)},_clickMoreWrapper:function(a){var b=this._sKeyword,c=this._oModel,d=c.getNext(),e=c.getBKeyword();a.stopPropagation();if(e){d=$.extend({q:b},d)}this._requestData(d,this._requestSuccess.bind(this,true,e),e)},_keyupText:function(a){var b=this._getTextValue();var c=a.keyCode==13;if(c){a.preventDefault()}if(b&&c){this._requestKeyword(b)}},_getTextValue:function(){return this._$elText.val().trim()},_requestKeyword:function(a){this._sKeyword=a;this._nTotal=0;this._requestData({q:a},this._requestSuccess.bind(this,false,true),true);clickcr(this._$elSearchBtn.get(0),this._sNClick,"","")},_requestData:function(a,b,c){if(c){this._requestDataForKeyword(a,b)}else{this._requestDataForSuggestion(a,b)}},_requestDataForKeyword:function(a,b){var c=$SE_CONFIG.API.SEARCH_MATERIAL.replace("{=TYPE}",this.getType().substr(0,1).toLowerCase()+this.getType().substr(1));a=a||{};a.q=a.q||"";$SE_AJAX.request(c,{type:"GET",timeout:5e3,data:a,dataType:"json"},{fSuccess:b})},_requestDataForSuggestion:function(a,b){var c=this._htMaterial,d,e,f;if(!c||!(d=c.SUGGESTION)||!(e=d[this._sGuideType])){return}f=$SE_CONFIG.API.SEARCH_MATERIAL_SUGGESTION.replace("{=TYPE}",this.getType().substr(0,1).toLowerCase()+this.getType().substr(1)).replace("{=SUGGESTION}",e);this._oBusyingXhr=$SE_AJAX.request(f,{type:"GET",timeout:5e3,data:a,dataType:"json"},{fSuccess:b})},_abort:function(){if(this._oBusyingXhr){this._oBusyingXhr.abort();this._oBusyingXhr=null;this.enableSuggestion()}},_clickList:function(a){var b=$(a.currentTarget),c=$(a.target),d,e=this.getType();a.stopPropagation();if(c.get(0).tagName=="A"||c.parent().get(0).tagName=="A"){return}d=b.attr("material-id");oDetailInfo=this._getDetailInfo(d);if($SE_CONFIG.ENV_SETTING.IS_BLOG_SERVICE&&$SE_CONFIG.SERVICE_CONFIG.IS_ON_MODIFICATION){$SE_CONFIG.SERVICE_CONFIG.MATERIAL_SELECTED_BLOG=true}this._IMP_insertMaterialComp(oDetailInfo)},_focusAndBlur:function(a){if(a.type==="focus"){this._$elSearchWrapper.addClass("is-focused")}else if(a.type==="blur"){this._$elSearchWrapper.removeClass("is-focused")}},insertMaterialComp:function(){var a=$($(this._$elSelectedTapView.find(".is-selected").get(0))),b,c;if(!a.get(0)){return}b=a.attr("material-id");c=this._getDetailInfo(b);this._IMP_insertMaterialComp(c)},_getDetailInfo:function(a){var b=this._aDetailInfo[this.getType()],c=this._IMP_getIdName();for(var d=0,e=b.length;d<e;d++){if(b[d][c]==a){return b[d]}}},_requestSuccess:function(a,b,c,d,e){this._updateTapView(c.result,a,b)},_updateTapView:function(a,b,c){var d=new se.SearchedMaterialModel(a,c);if(d.getTotal()===0){this._$elResultWrapper.hide();$(this._$elNoResult.show().find("p")).html("검색 결과가 없습니다.<br>검색어를 확인하신 후 다시 검색해주세요.")}else{this._$elNoResult.hide();this._$elResultWrapper.show();this._updateList(d,b);this._updateTotalCount(d);this._updateMoreInfo(d)}this._oModel=d;this._updateCash()},_updateList:function(a,b){var c=a.getJson(),d;c[this.getType()]=this._IMP_convertItems(c.items);d=this._fTemplate(c);if(b){this._$elResultList.append(d)}else{this._$elResultList.html(d)}},_updateTotalCount:function(a){var b=$SE_STRING.formatWithComma(a.getTotal());this._$elTotalCount.html(b)},_updateMoreInfo:function(a){var b=a.getCount(),c=this._nTotal,d=a.getTotal();if(b+c<d){this._nTotal+=b;this._$elCurrentCount.html(b+c);this._$elMoreTotalCount.html(d);this._$elMoreWrapper.show()}else{this._$elMoreWrapper.hide()}},_updateCash:function(){var a=this._oModel,b=this.getType();if(!this._aDetailInfo[b]){this._aDetailInfo[b]=[]}if(a.getTotal()===0){this._aDetailInfo[b]=[]}else{$.merge(this._aDetailInfo[b],a.getItems())}},getType:function(){return this._sGuideType},enableSuggestion:function(){this._bSuggested=false},_getSuggestionList:function(){var a=this._htMaterial,b,c;if(!a||!(b=a.SUGGESTION)||!(c=b[this._sGuideType])){return}this._nTotal=0;this._requestData({},this._requestSuccess.bind(this,false,false),false)},_modifyPeopleInfo:function(a){var b=$.extend(true,{},{aPeople:a}).aPeople,c;if(!a){return[]}for(var d=0,e=b.length;d<e;d++){c="";if(typeof b[d]=="string"){c=b[d]}else{c=b[d].name||""}b[d]={"@ctype":"value",value:c}}return b},_modifyDate:function(a){if(a){if(a.length==8){a=a.substr(0,4)+"."+a.substr(4,2)+"."+a.substr(6,2)+"."}else{a=a.replace(this._rxDateFormat,"$&.")}}return a},_modifyArrayToString:function(a,b){if(!a){return""}else{return a.join(b||" ")}},_loadThumbnail:function(a,b){var c=new Image;var d=$.Deferred();$(c).on("load",function(){var e={"@ctype":"thumbnail",src:b,width:c.width,height:c.height};d.resolve(a,e)});$(c).on("error",function(){d.reject(a,null)});c.src=b;return d.promise()},_IMP_insertMaterialComp:function(a){},_IMP_convertItems:function(a){return a},_IMP_getIdName:function(){return"id"}});se.defineComponent("se.AbstractDocumentManageList",{construct:function(a,b,c){c=$.extend({sListType:"",sTemplateName:"loaddoc-docList.hbs",sClickCode:""},c);this._initVar(a,c);this._wrapperElements(b);this._$el=b},_initVar:function(a,b){var c=b.sListType;this._oManage=a;this._sListType=c;this._nPage=1;this._nPageBase=30;this._nTotalCount=0;this._nCurrentCount=0;this._fTemplate=se.editor.template.control[b.sTemplateName];this._sClickCode=b.sClickCode},_wrapperElements:function(a){var b=$(a);this._$elBase=b;this._$elListWrapper=b.find(".__se_doc_list");this._$elTotalCount=b.find(".__se_top_list_total");this._$elMoreButton=b.find(".__se_doc_list_more");this._$elDeleteAllButton=b.find(".__se_top_all_delete_btn")},_bindEvent:function(){this._$elMoreButton.on("click",function(a){this.loadDocList(this._nPage+1)}.bind(this));this._$elListWrapper.on("click",".__se_loaddoc_list_title, .__se_loaddoc_list_delete",function(a){var b=$(a.target);var c=null,d;var e=b.closest(".__se_loaddoc_list_title");var f=b.closest(".__se_loaddoc_list_delete");if(e.get(0)){c=e.parent().attr("id");d=e.parent().attr("data-ispublish");this._loadDoc(c,d);a.preventDefault()}else if(f.get(0)){c=f.parent().attr("id");this._deleteDoc(c)}}.bind(this));this._$elDeleteAllButton.on("click",function(a){clickcr(this,"tpb*s.delall","","",a);this._deleteAllDocs()}.bind(this))},_unbindEvent:function(){this._$elMoreButton.off("click");this._$elListWrapper.off("click");this._$elDeleteAllButton.off("click")},_updatePageCount:function(){this._nPage=parseInt(this._nCurrentCount/this._nPageBase);if(this._nCurrentCount%this._nPageBase>0){this._nPage++}},_updateTotalPageCount:function(){this._nTotalPage=parseInt(this._nTotalCount/this._nPageBase);if(this._nTotalCount%this._nPageBase>0){this._nTotalPage++}this._$elTotalCount.html(se.i18n.getMsg("TOTAL_DRAFT_COUNT").replace("{=MAXLENGTH}",this._nTotalCount));if(this._nTotalCount===0){this._$elBase.addClass("empty")}else{this._$elBase.removeClass("empty")}},_updateMoreButton:function(){this._$elMoreButton[this._nTotalPage>this._nPage?"show":"hide"]()},createDocList:function(a){var b=a.list;b=b||[];this._nPage=a.page;this._nPageBase=a.pageBase;this._nTotalCount=a.total;this._nCurrentCount=this._nCurrentCount+b.length;this._updateTotalPageCount();if(this._nPage===1){this._$elListWrapper.empty()}this._makeList(b);this._updateMoreButton();if(this._IMPL_afterCreateList)this._IMPL_afterCreateList();if(this._nTotalCount>0){this._$elDeleteAllButton.show()}else{this._$elDeleteAllButton.hide()}},_makeList:function(a){var b;for(var c=0;c<a.length;c++){b=a[c];$("#"+b.id).remove();b.title=this._getTitle(b.title);b.createAt=moment(b.createdAt).format("YYYY.MM.DD. H:mm");b.clickCode=this._sClickCode;b.number=c+1;if(b.documentId&&b.documentId!==""&&this._sListType===$SE_CONFIG.MANAGE_DOC_TYPE.TEMP){b.ispublish=true}a[c]=b}this._$elListWrapper.append(this._fTemplate({list:a}))},_getTitle:function(a){if(!a){return""}a=a.trim();a=$SE_STRING.replaceSpecialChar(a);a=$SE_STRING.getPlainText(a);a=$SE_STRING.restoreSpecialChar(a);return a},deleteListItem:function(a){this._$elListWrapper.find("#"+a).remove();if(this._nTotalPage<this._nPage){this._nPage=this._nTotalPage}this.loadDocList(this._nPage)},_loadDoc:function(a,b){var c=se.i18n.getMsg("MSG_DOC_LOAD_CONFIRM");var d=!$SE_EVENT_HUB.trigger($SE_EVENT_HUB.MSG.CONTROL.IS_EMPTY_DOCUMENT);var e=$SE_EVENT_HUB.trigger($SE_EVENT_HUB.MSG.CONTROL.GET_CURRNET_TEMPDOC_ID);var f=b==="true";var g=e===a&&this._sListType===$SE_CONFIG.MANAGE_DOC_TYPE.TEMP;if(g){$(document.body).ntoast("setMessage",se.i18n.getMsg("MSG_ERROR_TEMP_ALREADY_LOAD")).ntoast("popupToast");this._oManage.close();return}if(d&&f){c=se.i18n.getMsg("MSG_DOC_LOAD_ALL_CONFIRM")}else if(d){c=se.i18n.getMsg("MSG_DOC_LOAD_NOTEMPTY_CONFIRM")}else if(f){c=se.i18n.getMsg("MSG_DOC_LOAD_PUBLISH_CONFIRM")}if((d||f)&&!confirm(c)){return false}var h=$.proxy(function(){this._oManage.trigger("onLoadDoc",{sType:this._sListType,sDocId:a});this._oManage.close()},this);if(d||f){this._oManage.trigger("onSaveTempDocument",{bSaveNow:false,fCallback:h})}else{h()}},_deleteDoc:function(a){this._oManage.trigger("onDeleteDoc",{sType:this._sListType,sDocId:a})},_deleteAllDocs:function(){this._oManage.trigger("onDeleteAllDocs")},loadDocList:function(a){a=a||1;this._oManage.trigger("onLoadDocList",{sType:this._sListType,nPage:a})},_IMPL_activeList:function(){},_IMPL_deactiveList:function(){},activate:function(){this._$elListWrapper.empty();this._$elListWrapper.scrollTop(0);this._bindEvent();this.loadDocList();this._IMPL_activeList();this._$el.addClass("is-on")},deactivate:function(){this._$elMoreButton.hide();this._$elListWrapper.empty();this._unbindEvent();this._nPage=1;this._nTotalCount=0;this._nCurrentCount=0;this._IMPL_deactiveList();this._$el.removeClass("is-on")}});se.defineClass("se.AbstractDocumentCoord",{construct:function(){var a=$SE_CONFIG.SERVICE_CONFIG;this._initVar();this.aServiceComponentSet=a.COMP_SET;this.COMP_INSERT_ITEM_DEFINE=a.COMP_INSERT_ITEM_DEFINE;this.COMP_DEFINE=$SE_COMMON_UTIL.deepFreeze(a.COMP_DEFINE);this._setThemeData(a.THEME_LIST)},_initVar:function(){this.CURRENT_THEME=$SE_CONFIG.SERVICE_CONFIG.DEFAULT_THEME||"default";this.COMP_STYLE={};this.DOC_STYLE={};this.THEME_INFO_LIST=[];this.CARD_FORMAT_DEFINE={};this.aServiceComponentSet=[];this.fUpdateThemeCallback=null;this.COMP_DEFINE={};this.DOC_DATA_DEFINE={docType:"normal",title:"",thumbnail:"",author:"",publishDate:""}},_setThemeData:function(a){a.forEach(function(a){this.THEME_INFO_LIST.push({name:a.name,thumbnailImage:a.thumbnailImage,order:a.order,desc:a.desc,isCoverColorDark:a.isCoverColorDark});this.DOC_STYLE[a.name]=a.documentStyle;this.COMP_STYLE[a.name]=a.componentStyle;this.CARD_FORMAT_DEFINE[a.name]=a.cardFormat},this)},_getCompStyle:function(a){return _.clone(this.COMP_STYLE[a])},_getDocStyle:function(a){return _.clone(this.DOC_STYLE[a])},_setCurrentTheme:function(a){this.CURRENT_THEME=a;if(this.fUpdateThemeCallback){this.fUpdateThemeCallback(a)}},_getCurrentTheme:function(){return this.CURRENT_THEME},_getDefaultCompData:function(a,b){var c=a;if(a.indexOf("_")>-1){c=a.split("_")[1]}var d=$SE_COMMON_UTIL.merge({},this.COMP_DEFINE[c]);var e=this._getThemeCompStyle(a,d);d.componentStyle=e;if(b&&(b===$SE_CONFIG.CARD_TYPE.DOUBLE_BACKGROUND||b===$SE_CONFIG.CARD_TYPE.BACKGROUND)&&a===$SE_CONFIG.COMP_TYPE.PARAGRAPH){d.componentStyle.align="left"}return d},_getDefaultSubCompData:function(a,b){var c=_.extend({},this.COMP_DEFINE[b]);var d=this._getThemeCompStyle(a+"_"+b,c);c.componentStyle=d;return c},_getThemeCompStyle:function(a,b){var c=this.COMP_STYLE[this.CURRENT_THEME]||{};var d=c.componentBase||{};var e;if(c[a]){e=_.extend(b.componentStyle,c[a])}else{e=_.extend(b.componentStyle,d)}return e},_getThemeInfo:function(a){var b=_.find(this.THEME_INFO_LIST,function(b){return b.name==a});return b||{name:"",isCoverColorDark:false}},_getNewDocData:function(){var a={};var b=_.clone(this.DOC_DATA_DEFINE);b.documentStyle=_.clone(this.DOC_STYLE[$SE_CONFIG.SERVICE_CONFIG.DEFAULT_THEME]);b.theme=$SE_CONFIG.SERVICE_CONFIG.DEFAULT_THEME;b.components=this._getDefaultComponentList();a.document=b;a.publishMeta={};return a},getDefaultCompList:function(){if($SE_CONFIG.SERVICE_CONFIG.FEATURES.DOCUMENT_TITLE){return this._IMPL_getCompList()}return _.without(this._IMPL_getCompList(),$SE_CONFIG.COMP_TYPE.DOCUMENT_TITLE)},_getDefaultComponentList:function(){var a=this.getDefaultCompList();var b=_.map(a,function(a){return this._getDefaultCompData(a)}.bind(this));return b},_IMPL_getCompList:function(){AbstractMethodNotOverrideException("_IMPL_getCompList")},_registUpdateThemeCallback:function(a){this.fUpdateThemeCallback=a},registUpdateThemeCallback:function(a){this._registUpdateThemeCallback(a)},getThemeCompStyle:function(a){return this._getCompStyle(a)},getThemeDocStyle:function(a){return this._getDocStyle(a)},setCurrentTheme:function(a){this._setCurrentTheme(a)},getCurrentTheme:function(){return this._getCurrentTheme()},getDefaultCompData:function(a,b){return this._getDefaultCompData(a,b)},getDefaultSubCompData:function(){return this._getDefaultSubCompData()},getInsertCompItemList:function(){var a=[];var b=this.aServiceComponentSet;b.forEach(function(b){a.push(this.COMP_INSERT_ITEM_DEFINE[b])},this);return a},getNewDocData:function(){return this._getNewDocData()},getThemeInfos:function(){return this.THEME_INFO_LIST},getThemeInfo:function(a){return this._getThemeInfo(a)}});
//# sourceMappingURL=blog_desktop_normal_editor_control_pre.min.js.map