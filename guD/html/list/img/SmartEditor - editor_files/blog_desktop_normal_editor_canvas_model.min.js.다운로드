/*! SmartEditor3 - v1.0.0 - 2018-05-10
* Copyright (c) 2018 NAVER Corp; Licensed  */

se.defineClass("se.DocumentTitleModel",se.BaseComponentModel,{construct:function(a){var b={"@ctype":"documentTitle",layout:"default",title:"",componentStyle:{"@ctype":"componentStyle",fontFamily:"nanumgothic",fontSize:"D1",align:"left"},background:{"@ctype":"background",color:""},publishDate:0,subtitle:""};var c=$.extend(true,{},b,a);this._initProperty(c)},_initProperty:function(a){this._title=a.title;this._subtitle=a.subtitle;this._publishDate=a.publishDate;this._background=a.background;if(a.background.image){this._background.image=new se.ImageModel(a.background.image)}this._background.color=a.background.color;this._genGetterSetter("title");this._genGetterSetter("subtitle");this._genGetterSetter("author");this._genGetterSetter("authorThumbnail");this._genGetterSetter("publishDate");this._genGetterSetter("background");var b=this.getComponentStyle();if(!b.fontFamily){this.changeComponentStyle("fontFamily",a.componentStyle.fontFamily)}if(!b.fontSize){this.changeComponentStyle("fontSize",a.componentStyle.fontSize)}if(!b.align){this.changeComponentStyle("align",a.componentStyle.align)}},getBackgroundImage:function(){if(this._background.image instanceof se.ImageModel){return this._background.image.getJson()}else{return this._background.image}},setBackgroundImage:function(a){if(a===null){this._background.image=null}else{this._setDisplayFormatNormal(a);this._background.image=new se.ImageModel(a)}},_setDisplayFormatNormal:function(a){a.displayFormat="normal"},changeComponentStyle:function(a,b){var c=this.getComponentStyle();c[a]=b},changeComponentStyle:function(a,b){var c=this.getComponentStyle();c[a]=b},setBackgroundMetric:function(a){var b=this._background.image;if(!b){return}b.setBackgroundMetric(a)},getPositioningInfo:function(){var a=this._background.image;if(!a){return}return a.getPositioningInfo()},_getJsonData:function(){var a=this.getBackgroundImage();var b={title:this._title,subtitle:this._subtitle,publishDate:this._publishDate,background:{"@ctype":"background",color:this._background.color}};if(a&&a.src){a["@ctype"]="image";b.background.image=a}return b}});se.defineClass("se.ParagraphModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._value=a.value||"";this._hasDropCap=a.hasDropCap||false;this._genGetterSetter("value");this._genGetterSetter("hasDropCap")},_getJsonData:function(){return{value:this._value,hasDropCap:this._hasDropCap}},getInitStyle:function(){if(this.getValue()){return null}return this.getData().INIT_STYLE}});se.defineClass("se.PositionModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._inDomestic=a.isLocalCoordinate;this._longitude=parseFloat(a.longitude);this._latitude=parseFloat(a.latitude);this._genGetterSetter("inDomestic");this._genGetterSetter("longitude");this._genGetterSetter("latitude")},_getJsonData:function(){return{inDomestic:this._inDomestic,longitude:this._longitude,latitude:this._latitude}},getJson:function(){var a=$.extend({"@ctype":"position"},this._getJsonData());return a}});se.defineClass("se.ImageModel",se.BaseComponentModel,{construct:function(a){_.extendOwn(this,se.ImageMixInModel);$SE_CONFIG.SERVICE_CONFIG.MEDIATAG_CONFIG&&_.extendOwn(this,se.MediaTagMixInModel);this.IMAGE_STANDARD_WIDTH=parseInt($SE_CONFIG.SERVICE_CONFIG.CONTENTS_STANDARD_WIDTH,10)||700;this.THUMBNAIL_STANDARD_WIDTH=parseInt($SE_CONFIG.SERVICE_CONFIG.IMAGE_THUMBNAIL_STANDARD_WIDTH,10)||1200;this.GIF_THUMBNAIL_TYPE=$SE_CONFIG.ENV_SETTING.GIF_THUMBNAIL_TYPE||"";this._initProperty(a)},_initProperty:function(a){a=a||{};this._width=parseInt(a.width,10)||0;this._height=parseInt(a.height,10)||0;this._originalWidth=parseInt(a.originalWidth,10)||this._width||0;this._originalHeight=parseInt(a.originalHeight,10)||this._height||0;this._alt=a.fileName||a.alt||"";this._path=a.path||"";this._fileSize=a.fileSize||0;this._uploadedLocal=a.uploadedLocal||false;this._offsetCenterXRatio=a.offsetCenterXRatio||0;this._offsetCenterYRatio=a.offsetCenterYRatio||0;this._backgroundPositionX=a.backgroundPositionX||"50%";this._backgroundPositionY=a.backgroundPositionY||"50%";this._represent=a.represent||false;this._fileName=this._alt;this._animationGIF=a.animationGIF||false;this._captionLink=a.captionLink||"";this._modifications=a.modifications||[];this._genGetterSetter("generationFormat");this._genGetterSetter("displayFormat");this._generationFormat=this._getFormatByPath(this._path);this._displayFormat=a.beforeFormat||this._getDisplayFormatByVR360Available(a.displayFormat);this.setDomain(a.domain);this.setSrc(a.src);this.setOriginSrc(a.src);this.doSetAlign(a.componentStyle);this.doSetLink(a.link);if(a.location){this.setLocation(a.location)}this.setType();this.setCaption(a.caption);this._genGetterSetter("width");this._genGetterSetter("height");this._genGetterSetter("originalWidth");this._genGetterSetter("originalHeight");this._genGetterSetter("alt");this._genGetterSetter("path");this._genGetterSetter("uploadedLocal");this._genGetterSetter("offsetCenterXRatio");this._genGetterSetter("offsetCenterYRatio");this._genGetterSetter("backgroundPositionX");this._genGetterSetter("backgroundPositionY");this._genGetterSetter("fileSize");this._genGetterSetter("represent");this._genGetterSetter("fileName");this._genGetterSetter("animationGIF");this._genGetterSetter("captionLink");this._genGetterSetter("modifications");this._createGifThumbnail();$SE_CONFIG.SERVICE_CONFIG.MEDIATAG_CONFIG&&this._extendMediaTagProperty(this._removeMediaTagOverCount(a))},_getDisplayFormatByVR360Available:function(a){var b=$SE_CONFIG.IMAGE.FORMAT.NORMAL;if(this._generationFormat===b){return b}a=a||this._generationFormat;return this.isVR360AvailableBy(a)?a:b},_createGifThumbnail:function(){var a=this._getGifThumbnailType();if(this._animationGIF&&a){var b=this.getOriginSrc()+a;this._requestGifThumbnail(b)}},_getGifThumbnailType:function(){var a=this.GIF_THUMBNAIL_TYPE;if(a){return"?type="+a}return""},_requestGifThumbnail:function(a){$("<img>").prop("src",a)},doSetAlign:function(a){var b;var c=$SE_CONFIG.SERVICE_CONFIG.DEFAULT_ALIGN[this.getCompType()];if(c){b=c}else if(a&&a.align){b=a.align;if(this.isMoreThanMaxWidth()&&this.isSmallImageAlign(b)){b=this.getDefaultBigImageAlign()}if(!this.isMoreThanMaxWidth()&&this.isBigImageAlign(b)){b=this.getDefaultSmallImageAlign()}}else{b=this.getDefaultAlignWithWidth()}this.setAlign(b)},getDefaultSmallImageAlign:function(){return $SE_CONFIG.ALIGN.LEFT},getDefaultBigImageAlign:function(){return $SE_CONFIG.ALIGN.JUSTIFY},isSmallImageAlign:function(a){return a===$SE_CONFIG.ALIGN.LEFT||a===$SE_CONFIG.ALIGN.RIGHT||a===$SE_CONFIG.ALIGN.CENTER},isBigImageAlign:function(a){return a===$SE_CONFIG.ALIGN.EXTEND||a===$SE_CONFIG.ALIGN.PAGEFULL},isJustifyAlign:function(a){return a===$SE_CONFIG.ALIGN.JUSTIFY},doSetLink:function(a){if(a){this.setLink(a)}},_getJsonData:function(){var a={src:this._src,width:this._width,height:this._height,originalWidth:this._originalWidth,originalHeight:this._originalHeight,alt:this._alt,caption:this._caption,captionLink:this._captionLink,path:this._path,domain:this._domain,uploadedLocal:this._uploadedLocal,offsetCenterXRatio:this._offsetCenterXRatio,offsetCenterYRatio:this._offsetCenterYRatio,backgroundPositionX:this._backgroundPositionX,backgroundPositionY:this._backgroundPositionY,fileSize:this._fileSize,represent:this._represent,fileName:this._fileName,animationGIF:this._animationGIF,generationFormat:this._generationFormat,displayFormat:this._displayFormat};var b=this.getLocation();if(b){a.location=b}var c=this.getLink();if(c){a.link=c}$SE_CONFIG.SERVICE_CONFIG.MEDIATAG_CONFIG&&this._extendMediaTagJsonData(a);return a},getLocation:function(){return this._location},setLocation:function(a){if(a){this._location=a}},setAlign:function(a){var b=$.extend(true,{},this.getComponentStyle(),{align:a});this.setComponentStyle(b)},getAlign:function(){return this.getComponentStyle().align},setDomain:function(a){if(this._uploadedLocal){this._domain=$SE_CONFIG.ENV_SETTING.IMAGE_DOMAIN}else{this._domain=a||""}},getDomain:function(){return this._domain},setSrc:function(a){this._src=this._getThumbnailUrl(a)},getSrc:function(){return this._src},setOriginSrc:function(a){this._originSrc=this._getOriginUrl(a)},getOriginSrc:function(){return this._originSrc},_getOriginUrl:function(a){var b=$SE_CONFIG.ENV_SETTING.IMAGE_DOMAIN;if(this._uploadedLocal){return b+this._path}return a},isMoreThanMaxWidth:function(a){var b=a||this._width;return b>this.IMAGE_STANDARD_WIDTH},getDefaultAlignWithWidth:function(){if(this.isMoreThanMaxWidth()){return this.getDefaultBigImageAlign()}return this.getDefaultSmallImageAlign()},setType:function(){if(this.isMoreThanMaxWidth()){this._type=1}else{this._type=2}},getType:function(){return this._type},setCaption:function(a){if(!$SE_CONFIG.SERVICE_CONFIG.IS_CAPTION_AVAILABLE){this._caption="";return}this._caption=a?$SE_STRING.removeNewLine(a):""},getCaption:function(){return this._caption},_getThumbnailUrl:function(a){var b=this._getOriginUrl(a);var c=this._getThumbnailType();if(this._uploadedLocal&&c){return b+c}return b},_getThumbnailType:function(){var a=$SE_CONFIG.ENV_SETTING.VR_THUMBNAIL_TYPE||"";if(this.isVR360AvailableBy(this._displayFormat)&&a){return"?type="+a}var b=$SE_CONFIG.ENV_SETTING.THUMBNAIL_TYPE||"";if(b){return"?type="+b}return""},changeDisplaySize:function(a,b){this.setWidth(a);this.setHeight(b)},changeOriginalSize:function(a,b){this.setOriginalWidth(a);this.setOriginalHeight(b)},isChangeDisplaySize:function(){return this.getWidth()!==this.getOriginalWidth()||this.getHeight()!==this.getOriginalHeight()},resetDisplaySize:function(){this.changeDisplaySize(this.getOriginalWidth(),this.getOriginalHeight())},replaceToError:function(){this.setUploadedLocal(false);this.setSrc($SE_CONFIG.ENV_SETTING.EDITOR_DOMAIN+"/static/img/no_image_404.png");this.setWidth(480);this.setHeight(210)},setBackgroundMetric:function(a){a=a||{};this.setOffsetCenterXRatio(a.nOffsetCenterXRatio);this.setOffsetCenterYRatio(a.nOffsetCenterYRatio);this.setBackgroundPositionX(a.sBackgroundPositionX);this.setBackgroundPositionY(a.sBackgroundPositionY)},getPositioningInfo:function(){return{offsetCenterXRatio:this.getOffsetCenterXRatio(),offsetCenterYRatio:this.getOffsetCenterYRatio(),backgroundPositionX:this.getBackgroundPositionX(),backgroundPositionY:this.getBackgroundPositionY(),width:this.getWidth(),height:this.getHeight(),src:this.getSrc()}},setLink:function(a){this._link=a},getLink:function(){if(this._link){return this._link}return null},updateSizeWithAlign:function(a,b){var c=this.isMoreThanMaxWidth()===this.isMoreThanMaxWidth(a);var d=this.getOriginalWidth()===a&&this.getOriginalHeight()===b;var e=this.getWidth()!=this.getOriginalWidth()||this.getHeight()!=this.getOriginalHeight();if(!d){this.changeDisplaySize(a,b);if(e){this.doSetAlign()}}if(!e&&!c){this.changeDisplaySize(a,b);this.doSetAlign()}}});se.defineStatic("se.ImageMixInModel",function(){return{_getFormatByPath:function(a){var b=new RegExp($SE_CONFIG.IMAGE.PATH.PREFIX+"\\w+");var c=b.exec(a);var d=_.invert($SE_CONFIG.IMAGE.PATH);if(c){c=c[0].replace($SE_CONFIG.IMAGE.PATH.PREFIX,"");return $SE_CONFIG.IMAGE.FORMAT[d[c]]}return $SE_CONFIG.IMAGE.FORMAT.NORMAL},isVR360ImageBy:function(a){if(!$SE_CONFIG.SERVICE_CONFIG.IS_VR360_AVAILABLE){return false}return a===$SE_CONFIG.IMAGE.FORMAT.VR360},isPanoramaImageBy:function(a){if(!$SE_CONFIG.SERVICE_CONFIG.IS_PANORAMA_AVAILABLE){return false}return a===$SE_CONFIG.IMAGE.FORMAT.PANORAMA},isVR360AvailableBy:function(a){return this.isVR360ImageBy(a)||this.isPanoramaImageBy(a)},getSrcByFormat:function(a,b){var c=b===$SE_CONFIG.IMAGE.FORMAT.NORMAL?$SE_CONFIG.ENV_SETTING.THUMBNAIL_TYPE:$SE_CONFIG.ENV_SETTING.VR_THUMBNAIL_TYPE;var d=a.src;if(this.isVR360AvailableBy(a.generationFormat)){d=a.domain+a.path+"?type="+c}return d}}}());se.defineStatic("se.MediaTagMixInModel",function(){return{_extendMediaTagProperty:function(a){this._mediaTags=$.extend(true,[],a.mediaTags);this._genGetterSetter("mediaTags")},_extendMediaTagJsonData:function(a){this.isEmptyMediaTag()?delete a.mediaTags:a.mediaTags=this._mediaTags},isEmptyMediaTag:function(){return this._mediaTags.length===0},getImage:function(){return{src:this._src,name:this._fileName}},isModifyPhotoEditor:function(){var a=this.getModifications();var b=["crop","resize"];if(a.length){return b.some(function(b){return a.indexOf(b)!==-1})}else{return false}},resetMediaTags:function(){this.setMediaTags([])},_removeMediaTagOverCount:function(a){if($SE_EVENT_HUB.trigger($SE_EVENT_HUB.MSG.COMMAND.COMPONENT_LIST.IS_MAX_MEDIATAG_COMPONENT)){delete a.mediaTags}return a}}}());se.defineClass("se.QuotationModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._value=a.value||"";this._genGetterSetter("value")},_getJsonData:function(){return{value:this._value}}});se.defineClass("se.MapModel",se.BaseComponentModel,{construct:function(a){this._htPropName={necessary:["locationType","searchEngine","placeId","title","address","centerPos","markerPos"],optional:["layout","searchType","componentStyle","zoomLevel","objectId","query","isImageType","thumbnail","thumbnailSrc","storedNo","didSearch"]};this._htDefaultValue={};this._initProperty(a)},_initProperty:function(a){this._initProperty_auto(a)},_initProperty_auto:function(a){a=a||{};a.thumbnailSrc=a.thumbnail?a.thumbnail.src:null;var b,c,d,e,f,g,h=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},i="_";for(b in this._htPropName){if(!this._htPropName.hasOwnProperty(b)){continue}c=this._htPropName[b];if(!h(c)){continue}f=g=c.length;for(;f--;){d=c[f];e=a[d];if(e){if(d==="centerPos"||d==="markerPos"){e=new se.PositionModel(e)}else if(d==="thumbnail"){e=new se.SimpleThumbnailModel(e)}else if(d==="componentStyle"){e={};var j=this.getComponentStyle().align||"left";if(a.componentStyle){var k=$.extend({},this.getComponentStyle(),{align:j});e=k}}}this[i+d]=typeof e!=="undefined"&&e!==null?e:this._htDefaultValue[d];this._genGetterSetter(d)}}},_getJsonData:function(){var a={};var b,c,d,e,f,g,h=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},i="_";for(b in this._htPropName){if(!this._htPropName.hasOwnProperty(b)){continue}c=this._htPropName[b];if(!h(c)){continue}f=g=c.length;for(;f--;){d=c[f];e=this[i+d];if(d==="centerPos"||d==="markerPos"||d==="thumbnail"){if(e&&typeof e.getJson==="function"){e=e.getJson()}}a[d]=typeof e!=="undefined"&&e!==null?e:this._htDefaultValue[d]}}return a}});se.defineClass("se.ScheduleModel",se.BaseComponentModel,{construct:function(a){this._htPropName={necessary:["title","startDateTime","isAllDay"],optional:["layout","componentStyle","endDateTime","locationMap","link","description","scheduleNo"]};this._htDefaultValue={isAllDay:false};this._initProperty(a)},_initProperty:function(a){this._initProperty_auto(a)},_initProperty_auto:function(a){a=a||{};var b,c,d,e,f,g,h=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},i="_";for(b in this._htPropName){if(!this._htPropName.hasOwnProperty(b)){continue}c=this._htPropName[b];if(!h(c)){continue}f=g=c.length;for(;f--;){d=c[f];e=a[d];if(e){if(d==="locationMap"){e=new se.MapModel(e)}}this[i+d]=typeof e!=="undefined"&&e!==null?e:this._htDefaultValue[d];this._genGetterSetter(d)}}},_getJsonData:function(){var a={};var b,c,d,e,f,g,h=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},i="_";for(b in this._htPropName){if(!this._htPropName.hasOwnProperty(b)){continue}c=this._htPropName[b];if(!h(c)){continue}f=g=c.length;for(;f--;){d=c[f];e=this[i+d];if(d==="locationMap"){if(e&&typeof e.getJson==="function"){e=e.getJson()}}a[d]=typeof e!=="undefined"&&e!==null?e:this._htDefaultValue[d]}}return a}});se.defineClass("se.TableModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a);this._totalColWidth=0},_initProperty:function(a){a=a||{};this._tableWidth=a.tableWidth||100;this._tableRows=a.tableRows||{};this._caption=a.caption||"";this._columnCount=a.columnCount||3;this._tableInlineStyle=a.tableInlineStyle||"";this._borderStyleName=a.borderStyleName;this._layout=this._formatLayout(a.layout);this._genGetterSetter("tableWidth");this._genGetterSetter("caption");this._genGetterSetter("columnCount");this._genGetterSetter("tableInlineStyle");this._genGetterSetter("borderStyleName")},getTableRows:function(){var a=this._tableRows;if(typeof a==="string"&&a!==""){this.setTableRows(a)}return this._tableRows},setTableRows:function(a){this._tableRows=this._getTableData(a)},_formatLayout:function(a){if(a==="table_default"){a="default"}return a},_getTableData:function(a){var b=$(a).find("tr");var c=$(a).find("colgroup col");var d=[];var e=0;this._totalColWidth=0;d=$(b).map(function(a,b){var d=$.extend(true,{},{"@ctype":"tableRow",componentStyle:{"@ctype":"componentStyle"},rowClassName:"",tableColumns:[]});var f=$(b).find("td");if(f.length<1){f=$(b).find("th")}if(e<f.length){e=f.length}d.tableColumns=this._getColumnData(f,c);d.rowClassName="";return d}.bind(this)).get();this.setColumnCount(e);return d},_getColumnData:function(a,b){var c=b.length>0?b:a;var d=this._getTotalColWidth(c);var e=0;var f=0;return $(a).map(function(a,c){var g=$.extend(true,{},{"@ctype":"tableColumn",componentStyle:{"@ctype":"componentStyle"},value:""});var h=$(c);var i=b.get(e)?parseInt(b.get(e).width,10):f;f=parseInt(c.width,10)||h.width()||i;e+=c.colSpan;var j=f/d*100||100/this._columnCount;this._refineBorderWidth(c);g["columnClassName"]="";g["backgroundColor"]=this._getHex(c.style.backgroundColor);g["colSpan"]=c.colSpan;g["rowSpan"]=c.rowSpan;var k=parseFloat(j.toFixed(8));if(k<0){k=0}g["width"]=k;g["height"]=h.outerHeight();g["tableInlineStyle"]=this._getIgnoredCssText(h.attr("style"));g["value"]=this._getContentValue(h);g["textAlign"]=this._getTextAlign(h);return g}.bind(this)).get()},_getTextAlign:function(a){var b=$SE_STYLE_HELPER.getAlignForModel(a);if(!b){var c=a.children();b=c.css("text-align")||c.children().css("text-align")}return b},_getTotalColWidth:function(a){var b=0;$.each(a,function(a,c){var d=parseInt(c.width,10)||$(c).width();var e=c.span||1;b+=d*e});this._totalColWidth=Math.max(b,this._totalColWidth);return this._totalColWidth},_getContentValue:function(a){var b=a.find(".__se_editable_value");var c="";if(b.length===0){c=a.html()}else{var d=$SE_COMMON_UTIL.getIEInfo();if(d.IsIE&&d.TrueVersion===11&&d.ActingVersion===11){var e=b.find("br");if(e.length>0){e.last().html("")}}c=b.html()}return c},_refineBorderWidth:function(a){var b=["border-top-width","border-bottom-width","border-left-width","border-right-width"];$.each(b,function(b,c){var d=parseFloat(a.style[c]);if(d<1&&d>0){a.style[c]=Math.ceil(d)+"px"}})},_getIgnoredCssText:function(a){if(!a){return""}var b=a.split(";");var c=[];c=_.filter(b,function(a){var b=a.split(":");var c=b[0].trim();return c!=="width"&&c!=="height"&&c!=="background-color"});return c.join(";").trim()},_getHex:function(a){if(!a){return}var b=a.match("rgb")?true:false;var c="";if(b){c=$SE_COMMON_UTIL.rgbToHex(a)}else{c=$SE_COMMON_UTIL.colorNameToHex(a)}return c},_getJsonData:function(){return{tableRows:this.getTableRows(),tableWidth:this._tableWidth,caption:this._caption,tableInlineStyle:this._tableInlineStyle,borderStyleName:this._borderStyleName,columnCount:this._columnCount,layout:this._layout}}});se.defineClass("se.SectionTitleModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._type=a.type||"";this._title=a.title||"";this._subTitle=a.subTitle||"";this._genGetterSetter("type");this._genGetterSetter("title");this._genGetterSetter("subTitle");this._assignDefaultStyle()},_assignDefaultStyle:function(){var a=$SE_MODEL_DATA_COORD.getDefaultCompData(this.getCompType());var b=a.componentStyle;var c=this.getComponentStyle();if(!c.fontSize){c.fontSize=b.fontSize}if(!c.fontFamily){c.fontFamily=b.fontFamily}if(!c.align){c.align=b.align}},_getJsonData:function(){return{type:this._type,title:this._title,subTitle:this._subTitle}}});se.defineClass("se.VideoModel",se.BaseComponentModel,{ALIGN:{LEFT:"left",RIGHT:"right",CENTER:"center",JUSTIFY:"justify"},construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._vid=a.vid;this.setThumbnail(a.thumbnail);this.setCaption(a.caption);this._uploadedLocal=a.uploadedLocal||false;this._represent=a.represent||false;this._fileSize=a.fileSize||0;this._resizedDisplayWidth=null;this._resizedDisplayHeight=null;this._genGetterSetter("displayWidth");this._genGetterSetter("displayHeight");this._genGetterSetter("vid");this._genGetterSetter("uploadedLocal");this._genGetterSetter("represent");this._genGetterSetter("fileSize");if(a.source){this._source=a.source;this._genGetterSetter("source")}if(a.template){this._template=a.template;this._genGetterSetter("template")}if(a.width){this._width=a.width;this._genGetterSetter("width")}if(a.height){this._height=a.height;this._genGetterSetter("height")}if(a.playTime){this._playTime=a.playTime;this._genGetterSetter("playTime")}if(a.vendor){this._vendor=a.vendor;this._genGetterSetter("vendor")}if(a.generationFormat){this._generationFormat=a.generationFormat;this._genGetterSetter("generationFormat")}this._doSetDisplaySize(a);this._doSetIsResized();this._doSetAlign(a.componentStyle)},setResizedInfo:function(a,b){this._resizedDisplayWidth=a;this._resizedDisplayHeight=b},_doSetIsResized:function(){var a=this.getDefaultDisplayWidth();var b=this._displayWidth!==null&&this._displayWidth!==a;if(b){this.setResizedInfo(this._displayWidth,this._displayHeight)}this.setIsResized(b)},setIsResized:function(a){this._isResized=a},_doSetDisplaySize:function(a){this._displayWidth=this._getDisplaySizeValue(a.displayWidth);this._displayHeight=this._getDisplaySizeValue(a.displayHeight)},_getDisplaySizeValue:function(a){return a&&_.isNumber(a)?a:null},getDisplayRatio:function(a){var b;if(a.width&&a.height){b=a.height>=a.width?1:a.height/a.width}else{b=9/16}return b},getDisplaySize:function(){return{width:this._displayWidth,height:this._displayHeight}},setDisplaySize:function(a,b){this._displayWidth=a;this._displayHeight=b},getDefaultDisplaySize:function(){var a=parseInt($SE_CONFIG.SERVICE_CONFIG.CONTENTS_STANDARD_WIDTH,10);var b=this._displayHeight/this._displayWidth;var c=Math.round(a*b);return{width:a,height:c}},getDefaultDisplayWidth:function(){return parseInt($SE_CONFIG.SERVICE_CONFIG.CONTENTS_STANDARD_WIDTH,10)},_doSetAlign:function(a){var b;var c=$SE_CONFIG.SERVICE_CONFIG.DEFAULT_ALIGN[this.getCompType()];if(c){b=c}else if(a&&a.align){b=a.align}else{b=this.getDefaultVideoAlign()}this.setAlign(b)},setAlign:function(a){var b=$.extend(true,{},this.getComponentStyle(),{align:a});this.setComponentStyle(b);if(this._isResized){this._updateCurrentDisplaySize(a)}},_updateCurrentDisplaySize:function(a){var b,c;var d=this.getDefaultVideoAlign();if(a===d){this.setResizedInfo(this.getDisplayWidth(),this.getDisplayHeight());b=null;c=null}else{b=this._resizedDisplayWidth;c=this._resizedDisplayHeight}this.setDisplaySize(b,c)},getCurrentWidth:function(){var a=this.getDefaultVideoAlign();var b=this.getAlign();var c=b===a?this._resizedDisplayWidth:this.getDisplayWidth();return c},getAlign:function(){return this.getComponentStyle().align},getDefaultVideoAlign:function(){return this.ALIGN.JUSTIFY},getDefaultSmallVideoAlign:function(){return this.ALIGN.LEFT},getThumbnail:function(){return this._thumbnail.getJson()},setThumbnail:function(a){a.src=a.src||"/static/img/se_video_noThumb.jpg";a.alt=a.alt||"";this._thumbnail=new se.SimpleThumbnailModel(a)},setCaption:function(a){if(a){a=$SE_STRING.removeNewLine(a)}this._caption=a||""},getCaption:function(){return this._caption},isVertical:function(){if(this._width<=this._height){return true}return false},_getJsonData:function(){var a={vid:this._vid,caption:$SE_CONFIG.SERVICE_CONFIG.IS_CAPTION_AVAILABLE?this._caption:"",thumbnail:this.getThumbnail(),uploadedLocal:this._uploadedLocal,represent:this._represent,fileSize:this._fileSize,displayWidth:this._displayWidth,displayHeight:this._displayHeight,isResized:this._isResized,resizedWidth:this._resizedDisplayWidth,resizedHeight:this._resizedDisplayHeight};if(this._source){a.source=this._source}if(this._template){a.template=this._template}if(this._width){a.width=this._width}if(this._height){a.height=this._height}if(this._playTime){a.playTime=this._playTime}if(this._vendor){a.vendor=this._vendor}if(this._generationFormat){a.generationFormat=this._generationFormat}return a}});se.defineClass("se.RepresentativeImageModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._libraryId=a.libraryId;this._type=a.type;this._thumbnail=new se.SimpleThumbnailModel(a.thumbnail||{});this._genGetterSetter("libraryId");this._genGetterSetter("type");this._genGetterSetter("thumbnail")},_getJsonData:function(){return{libraryId:this._libraryId,type:this._type,thumbnail:this._thumbnail.getJson()}},getJson:function(){var a=$.extend({"@ctype":this._compType},this._getJsonData());return a}});se.defineClass("se.SimpleThumbnailModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._src=a.src;this._alt=a.alt||"";this._genGetterSetter("src");this._genGetterSetter("alt")},_getJsonData:function(){return{src:this._src,alt:this._alt}},getJson:function(){var a=$.extend({"@ctype":"simpleThumbnail"},this._getJsonData());return a}});se.defineClass("se.ImageStripModel",se.BaseComponentModel,{beforeFormats:{},construct:function(a){_.extendOwn(this,se.ImageMixInModel);this._initProperty(a);this.updateWidthRatio();this.issueSubCompId()},_initProperty:function(a){a=a||{};this.setCaption(a.caption);this._captionLink=a.captionLink||"";if(a.componentStyle){this.setAlign(a.componentStyle.align)}else{this.setAlign(this.getComponentStyle().align)}this._components=a.components||[];this._genGetterSetter("components")},issueSubCompId:function(){var a=this.getComponents();a.forEach(function(a){if(!a.compId){a.compId=this._generateSubComponentId()}}.bind(this))},_generateSubComponentId:function(){var a="image_"+this._generateRandom16Digit(),b=this.getComponents(),c=true;var d=function(b){if(a===b.subCompId){c=false;a="image_"+this._generateRandom16Digit()}}.bind(this);do{b.forEach(d)}while(!c);return a},_generateRandom16Digit:function(){return Math.floor(Math.random()*1e16)},getIndexOfSubCompById:function(a){var b=this.getComponents(),c=-1;b.forEach(function(b,d){if(a===b.compId){c=d}}.bind(this));return c},updateWidthRatio:function(){var a=this.getComponents(),b=a[0].height,c;a.forEach(function(a){var c=b/a.height;a._normalHeight=a.height*c;a._normalWidth=a.width*c});c=a.reduce(function(a,b){var c=typeof a==="number"?a:a._normalWidth;var d=typeof b==="number"?b:b._normalWidth;return c+d});a.forEach(function(a){var b=a._normalWidth/c*100;a.widthRatio=b;delete a._normalHeight;delete a._normalWidth})},changeDisplayFormatNormalComponents:function(){var a=this.getComponents();_.each(a,function(a){this.setBeforeFormat(a.compId,a.displayFormat);a.displayFormat=$SE_CONFIG.IMAGE.FORMAT.NORMAL;a.src=this.getSrcByFormat(a,$SE_CONFIG.IMAGE.FORMAT.NORMAL)}.bind(this))},setBeforeFormat:function(a,b){if(!this.beforeFormats[a]){this.beforeFormats[a]=b}},getBeforeFormat:function(a){var b=this.beforeFormats[a];delete this.beforeFormats[a];return b},checkHasVR360Image:function(){var a=this.getComponents().some(function(a){return this.isVR360AvailableBy(a.generationFormat)}.bind(this));return a},setAlign:function(a){var b=a.replace("align-","");var c=$.extend({},this.getComponentStyle(),{align:b});this.setComponentStyle(c)},getAlign:function(){return this.getComponentStyle().align},setCaption:function(a){if(a){a=$SE_STRING.removeNewLine(a)}this._caption=a||""},getCaption:function(){return this._caption},setRepresentBySubCompId:function(a,b){var c=this.getComponents();var d=this.getIndexOfSubCompById(b);c[d].represent=a;this.setComponents(c)},_getJsonData:function(){return{caption:this._caption,captionLink:this._captionLink,components:this._components}}});se.defineClass("se.HorizontalLineModel",se.BaseComponentModel,{construct:function(){},_getJsonData:function(){return{}}});se.defineClass("se.FileExtraInfoModel",{construct:function(a){if(a.fileExtraInfo){a=a.fileExtraInfo}this._initProperty(a)},_initProperty:function(a){this._attachMimeType=a.attachMimeType||null;this._directory=a.directory||null;this._id=a.id||null;this._md5Hex=a.md5Hex||null;this._sha1Hex=a.sha1Hex||null},_getJsonByProperty:function(a,b,c){if(c){a=a||{};a[b]=c}return a},getJson:function(){var a;a=this._getJsonByProperty(a,"attachMimeType",this._attachMimeType);a=this._getJsonByProperty(a,"directory",this._directory);a=this._getJsonByProperty(a,"id",this._id);a=this._getJsonByProperty(a,"md5Hex",this._md5Hex);a=this._getJsonByProperty(a,"sha1Hex",this._sha1Hex);if(a===undefined){return false}a["@ctype"]="fileExtraInfo";return a}});se.defineClass("se.FileModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._src=a.src||"";this._fileName=a.fileName||"";this._fileSize=a.fileSize||0;this._uploadedLocal=a.uploadedLocal;this._fileType=a.fileType||"";if(a.componentStyle){this.setAlign(a.componentStyle.align)}this._createFileExtraInfo(a);this._genGetterSetter("src");this._genGetterSetter("fileName");this._genGetterSetter("fileSize");this._genGetterSetter("uploadedLocal");this._genGetterSetter("fileType")},_createFileExtraInfo:function(a){var b=new se.FileExtraInfoModel(a);if(b.getJson()){this._fileExtraInfo=b}},_getJsonData:function(){var a={src:this._src,fileName:this._fileName,fileSize:this._fileSize,uploadedLocal:this._uploadedLocal};if(this._fileExtraInfo){a.fileExtraInfo=this._fileExtraInfo.getJson()}return a},setAlign:function(a){a=a||"left";var b=$.extend(this.getComponentStyle(),{align:a});this.setComponentStyle(b)},getAlign:function(){return this.getComponentStyle().align}});se.defineClass("se.OglinkModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){this._htData=a||{};this._title=a.title||"";this._link=a.link||"";this._domain=a.domain||"";this._thumbnail=a.thumbnail||null;this._desc=a.desc||"";this._isVideo=a.isVideo||false;var b=this.getComponentStyle().align||"left";if(a.componentStyle){this.setAlign(b)}this._genGetterSetter("title");this._genGetterSetter("link");this._genGetterSetter("domain");this._genGetterSetter("desc");this._genGetterSetter("isVideo")},setAlign:function(a){var b=$.extend({},this.getComponentStyle(),{align:a});this.setComponentStyle(b)},setThumbnail:function(a){this._thumbnail=a;if(!!a===false){delete this._htData.thumbnail}},getThumbnail:function(){return this._thumbnail},_getJsonData:function(){return _.extend({},this._htData,{title:this._title,link:this._link,domain:this._domain,desc:this._desc,isVideo:this._isVideo},this._thumbnail?{thumbnail:this._thumbnail}:null)}});se.defineClass("se.MaterialModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._title=a.title||"";this._link=a.link||"";this._thumbnail=a.thumbnail||null;this._id=a.id||"";this._subId=a.subId||"";this._type=a.type||"";this._volNo=a.volNo||"";this._detailInfo=a.detailInfo;this._genGetterSetter("title");this._genGetterSetter("link");this._genGetterSetter("thumbnail");this._genGetterSetter("id");this._genGetterSetter("subId");this._genGetterSetter("type");this._genGetterSetter("volNo");this._genGetterSetter("detailInfo")},_getJsonData:function(){var a={title:this._title,link:this._link,thumbnail:this._thumbnail,id:this._id,subId:this._subId,type:this._type,volNo:this._volNo,detailInfo:this._detailInfo};if(!a.thumbnail){delete a.thumbnail}return a}});se.defineClass("se.StickerModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._packCode=a.packCode||"";
this._seq=a.seq||0;this._animated=a.animated||false;this._original=a.original||{"@ctype":"thumbnail",src:"",width:0,height:0};this._genGetterSetter("packCode");this._genGetterSetter("seq");this._genGetterSetter("original");var b=this.getComponentStyle();if(b.align===undefined){b.align="left";this.setComponentStyle(b)}},_getJsonData:function(){return{packCode:this._packCode,seq:this._seq,animated:this._animated,original:this._original}}});se.defineClass("se.TalktalkModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._accountId=a.accountId||"";this._profileName=a.profileName||"";this.setImage(a.image);this._genGetterSetter("accountId");this._genGetterSetter("profileName")},getImage:function(){return this._image},setImage:function(a){if(a instanceof se.ImageModel){this._image=a}else if(a){a.displayFormat=$SE_CONFIG.IMAGE.FORMAT.NORMAL;this._image=new se.ImageModel(a)}},_getJsonData:function(){var a={accountId:this._accountId,profileName:this._profileName};if(this._image){a.image=this._image.getJson()}return a}});se.defineClass("se.MrBlogModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};this._talkCode=a.talkCode||"";this._title=a.title||"";this._contents=a.contents||"";this._genGetterSetter("talkCode");this._genGetterSetter("title");this._genGetterSetter("contents")},_getJsonData:function(){return{talkCode:this._talkCode,title:this._title,contents:this._contents}}});se.defineClass("se.AnniversarySectionModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){this._htData=a||{}},_getJsonData:function(){return this._htData}});se.defineClass("se.CodeModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},changeFontSize:function(a){var b=this.getComponentStyle();b.fontSize=a;this.setComponentStyle(b)},getFontSize:function(){return this.getComponentStyle().fontSize},_initProperty:function(a){a=a||{};this._codeContents=a.codeContents||"";this._genGetterSetter("codeContents")},_getJsonData:function(){return{codeContents:this._codeContents}}});se.defineClass("se.WrappingParagraphModel",se.BaseComponentModel,{construct:function(a){this._initProperty(a)},_initProperty:function(a){a=a||{};var b=a.paragraph||$SE_MODEL_DATA_COORD.getDefaultCompData($SE_CONFIG.COMP_TYPE.PARAGRAPH);var c=a.wrapComp||$SE_MODEL_DATA_COORD.getDefaultCompData($SE_CONFIG.COMP_TYPE.IMAGE);var d=a.INIT_STYLE;if(d){b.INIT_STYLE=d}this._wrapComp=this._getModelInstance(c);this._paragraph=this._getModelInstance(b);this._layout=this._convertLayoutByService(this._layout);this._genGetterSetter("wrapComp");this._genGetterSetter("paragraph")},_convertLayoutByService:function(a){if($SE_CONFIG.ENV_SETTING.IS_POST_SERVICE){return a.replace("inner-big","outer")}else if($SE_CONFIG.ENV_SETTING.IS_BLOG_SERVICE){return a.replace("outer","inner-big")}return a},_getJsonData:function(){return{wrapComp:this._wrapComp.getJson(),paragraph:this._paragraph.getJson()}},updateSubComp:function(a,b){this["_"+a].updateWith(b)}});
//# sourceMappingURL=blog_desktop_normal_editor_canvas_model.min.js.map